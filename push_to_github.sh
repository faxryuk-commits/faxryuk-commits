#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è push –≤ GitHub

echo "üì§ Push –≤ GitHub..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è remote
if ! git remote | grep -q origin; then
    echo "‚ùå Remote 'origin' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    echo ""
    echo "–°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:"
    echo "  ./setup_github.sh"
    echo ""
    echo "–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub.com –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
    echo "  git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO.git"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
if [ -n "$(git status --porcelain)" ]; then
    echo "‚ö†Ô∏è  –ï—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –î–æ–±–∞–≤–∏—Ç—å –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å? (y/n)"
    read -r response
    if [[ "$response" =~ ^([yY][eE][sS]|[yY])$ ]]; then
        git add .
        git commit -m "Update: $(date '+%Y-%m-%d %H:%M:%S')"
    fi
fi

# Push
echo ""
echo "–û—Ç–ø—Ä–∞–≤–ª—è—é –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
git push -u origin main

if [ $? -eq 0 ]; then
    echo ""
    echo "‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ GitHub!"
    echo ""
    REMOTE_URL=$(git remote get-url origin)
    echo "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: $REMOTE_URL"
else
    echo ""
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ remote:"
    echo "  git remote -v"
fi
